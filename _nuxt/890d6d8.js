(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{378:function(e,t,n){"use strict";n.r(t);var r=n(11),o=(n(65),n(6),n(33),n(34),n(48),n(24),n(108)),c=n.n(o),d=n(353),l=n(354),m=n(355);function f(){var e=(new Date).toGMTString(),t=new m.a("SHA-1","TEXT");return t.setHMACKey("oPs2MCCXebrQ1LN0n0g6M8kY81Q","TEXT"),t.update("x-date: "+e),{Authorization:'hmac username="bd83b99ad326452a97b670ff9c5aebba", algorithm="hmac-sha1", headers="x-date", signature="'+t.getHMAC("B64")+'"',"X-Date":e}}var S={data:function(){return{setDate:"",info:{},fares:{},oneTrains:{},searchItems:["0803","0609","0813","0125","0829","0141","0845","0853","0861","0295","0802","0610","0814","0630","0830","0654","0846","0854","0862","0294"],date:"",depart:"",arrival:"",searchTrainNo:"",train0990:{end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1000:{end0990:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1010:{end0990:[],end1000:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1020:{end0990:[],end1000:[],end1010:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1030:{end0990:[],end1000:[],end1010:[],end1020:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1035:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1040:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1043:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1043:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1047:[],end1050:[],end1060:[],end1070:[]},train1047:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1050:[],end1060:[],end1070:[]},train1050:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1060:[],end1070:[]},train1060:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1070:[]},train1070:{end0990:[],end1000:[],end1010:[],end1020:[],end1030:[],end1035:[],end1040:[],end1043:[],end1047:[],end1050:[],end1060:[]}}},computed:{},created:function(){},updated:function(){},methods:{getTrainInfo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.searchItems.map((function(t){return c.a.get("https://ptx.transportdata.tw/MOTC/v2/Rail/THSR/GeneralTimetable/TrainNo/".concat(t,"?%24top=30&%24format=JSON"),{headers:f()}).then((function(t){var n=t.data[0].GeneralTimetable;e.setAllDate(n)}))})));case 2:return t.next=4,e.setTrainInfo();case 4:alert("success");case 5:case"end":return t.stop()}}),t)})))()},setAllDate:function(e){this.info={start0990:this.setTrain(e,this.train0990,"0990"),start1000:this.setTrain(e,this.train1000,"1000"),start1010:this.setTrain(e,this.train1010,"1010"),start1020:this.setTrain(e,this.train1020,"1020"),start1030:this.setTrain(e,this.train1030,"1030"),start1035:this.setTrain(e,this.train1035,"1035"),start1040:this.setTrain(e,this.train1040,"1040"),start1043:this.setTrain(e,this.train1043,"1043"),start1047:this.setTrain(e,this.train1047,"1047"),start1050:this.setTrain(e,this.train1050,"1050"),start1060:this.setTrain(e,this.train1060,"1060"),start1070:this.setTrain(e,this.train1070,"1070")}},setTrain:function(e,data,t){for(var n={DailyTrainInfo:{TrainNo:e.GeneralTrainInfo.TrainNo},TrainDate:this.setDate,OriginStopTime:{DepartureTime:""},DestinationStopTime:{ArrivalTime:""}},r="",o=e.StopTimes,i=0;i<o.length;i++)o[i].StationID===t&&(r=o[i].DepartureTime,n.OriginStopTime.DepartureTime=r);var c=[];return 0===e.GeneralTrainInfo.Direction?c=this.insertTrainInfo(o,n,data,t):1===e.GeneralTrainInfo.Direction&&(c=this.insertTrainInfo2(o,n,data,t)),c},insertTrainInfo:function(e,t,n,r){var o=n;if(""!==t.OriginStopTime.DepartureTime)for(var c={},d={},i=0;i<e.length;i++)c=JSON.parse(JSON.stringify(t)),"1000"===(d=e[i]).StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1000.push(c)):"1010"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1010.push(c)):"1020"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1020.push(c)):"1030"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1030.push(c)):"1035"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1035.push(c)):"1040"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1040.push(c)):"1043"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1043.push(c)):"1047"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1047.push(c)):"1050"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1050.push(c)):"1060"===d.StationID&&d.StationID>r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1060.push(c)):"1070"===d.StationID&&d.StationID>r&&(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1070.push(c));return o},insertTrainInfo2:function(e,t,n,r){var o=n;if(""!==t.OriginStopTime.DepartureTime)for(var c={},d={},i=0;i<e.length;i++)c=JSON.parse(JSON.stringify(t)),"1000"===(d=e[i]).StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1000.push(c)):"1010"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1010.push(c)):"1020"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1020.push(c)):"1030"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1030.push(c)):"1035"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1035.push(c)):"1040"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1040.push(c)):"1043"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1043.push(c)):"1047"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1047.push(c)):"1050"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1050.push(c)):"1060"===d.StationID&&d.StationID<r?(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end1060.push(c)):"0990"===d.StationID&&d.StationID<r&&(c.DestinationStopTime.ArrivalTime=d.ArrivalTime,o.end0990.push(c));return o},setTrainInfo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={apiKey:"AIzaSyDjAHb07_Mk-pJExz3tg04BgpB8QLHvFgY",authDomain:"rail-nuxt.firebaseapp.com",databaseURL:"https://rail-nuxt-default-rtdb.firebaseio.com",projectId:"rail-nuxt",storageBucket:"rail-nuxt.appspot.com",messagingSenderId:"85380246039",appId:"1:85380246039:web:82e4bcb2bdc6ed35f5ca52",measurementId:"G-4HSRY9S9HE"},confirm("set?")&&(r=Object(l.c)(Object(d.a)(n)),Object(l.e)(Object(l.d)(r,"trainInfo/".concat(e.setDate)),{info:e.info}).then((function(){alert("success"),location.reload()})).catch((function(e){alert("failed"),console.error(e)})));case 3:case"end":return t.stop()}}),t)})))()},findFare:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("https://ptx.transportdata.tw/MOTC/v2/Rail/THSR/ODFare?%24format=JSON",{headers:f()}).then((function(t){e.rebuildFare(t.data)}));case 2:return t.next=4,e.setFares();case 4:alert("success");case 5:case"end":return t.stop()}}),t)})))()},rebuildFare:function(e){var t={start0990:this.setFare(e,this.train0990,"0990"),start1000:this.setFare(e,this.train1000,"1000"),start1010:this.setFare(e,this.train1010,"1010"),start1020:this.setFare(e,this.train1020,"1020"),start1030:this.setFare(e,this.train1030,"1030"),start1035:this.setFare(e,this.train1035,"1035"),start1040:this.setFare(e,this.train1040,"1040"),start1043:this.setFare(e,this.train1043,"1043"),start1047:this.setFare(e,this.train1047,"1047"),start1050:this.setFare(e,this.train1050,"1050"),start1060:this.setFare(e,this.train1060,"1060"),start1070:this.setFare(e,this.train1070,"1070")};this.fares=t},setFare:function(e,data,t){for(var n=data,i=0;i<e.length;i++)e[i].OriginStationID===t&&"0990"===e[i].DestinationStationID?n.end0990=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1000"===e[i].DestinationStationID?n.end1000=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1010"===e[i].DestinationStationID?n.end1010=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1020"===e[i].DestinationStationID?n.end1020=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1030"===e[i].DestinationStationID?n.end1030=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1035"===e[i].DestinationStationID?n.end1035=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1040"===e[i].DestinationStationID?n.end1040=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1043"===e[i].DestinationStationID?n.end1043=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1047"===e[i].DestinationStationID?n.end1047=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1050"===e[i].DestinationStationID?n.end1050=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1060"===e[i].DestinationStationID?n.end1060=JSON.parse(JSON.stringify(e[i])):e[i].OriginStationID===t&&"1070"===e[i].DestinationStationID&&(n.end1070=JSON.parse(JSON.stringify(e[i])));return n},setFares:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.fares);case 1:case"end":return t.stop()}}),t)})))()},getOneTrain:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.searchItems.map((function(t){return c.a.get("https://ptx.transportdata.tw/MOTC/v2/Rail/THSR/GeneralTimetable/TrainNo/".concat(t,"?%24top=30&%24format=JSON"),{headers:f()}).then((function(t){var n=t.data[0].GeneralTimetable;e.rebuildSingleTrain(n)}))})));case 2:return t.next=4,e.setOneTrains();case 4:alert("success");case 5:case"end":return t.stop()}}),t)})))()},rebuildSingleTrain:function(data){var e=data.GeneralTrainInfo.TrainNo;this.oneTrains["No".concat(e)]=JSON.parse(JSON.stringify(data))},setOneTrains:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={apiKey:"AIzaSyDjAHb07_Mk-pJExz3tg04BgpB8QLHvFgY",authDomain:"rail-nuxt.firebaseapp.com",databaseURL:"https://rail-nuxt-default-rtdb.firebaseio.com",projectId:"rail-nuxt",storageBucket:"rail-nuxt.appspot.com",messagingSenderId:"85380246039",appId:"1:85380246039:web:82e4bcb2bdc6ed35f5ca52",measurementId:"G-4HSRY9S9HE"},confirm("set?")&&(r=Object(l.c)(Object(d.a)(n)),Object(l.e)(Object(l.d)(r,"oneTrains"),{info:e.oneTrains}).then((function(){alert("success"),location.reload()})).catch((function(e){alert("failed"),console.error(e)})));case 3:case"end":return t.stop()}}),t)})))()},getAllMes:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.backTrainInfo=[],n=e.findTrain(),r=e.findTicket(),t.next=6,Promise.all([n,r]);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("catch",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},findTrain:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={apiKey:"AIzaSyDjAHb07_Mk-pJExz3tg04BgpB8QLHvFgY",authDomain:"rail-nuxt.firebaseapp.com",databaseURL:"https://rail-nuxt-default-rtdb.firebaseio.com",projectId:"rail-nuxt",storageBucket:"rail-nuxt.appspot.com",messagingSenderId:"85380246039",appId:"1:85380246039:web:82e4bcb2bdc6ed35f5ca52",measurementId:"G-4HSRY9S9HE"},r=Object(l.d)(Object(l.c)(Object(d.a)(n))),Object(l.b)(Object(l.a)(r,"trainInfo/".concat(e.date,"/info/start").concat(e.depart,"/end").concat(e.arrival))).then((function(e){console.log(e.val())})).catch((function(e){console.log(e),alert("查無資訊")}));case 3:case"end":return t.stop()}}),t)})))()},findTicket:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={apiKey:"AIzaSyDjAHb07_Mk-pJExz3tg04BgpB8QLHvFgY",authDomain:"rail-nuxt.firebaseapp.com",databaseURL:"https://rail-nuxt-default-rtdb.firebaseio.com",projectId:"rail-nuxt",storageBucket:"rail-nuxt.appspot.com",messagingSenderId:"85380246039",appId:"1:85380246039:web:82e4bcb2bdc6ed35f5ca52",measurementId:"G-4HSRY9S9HE"},r=Object(l.d)(Object(l.c)(Object(d.a)(n))),Object(l.b)(Object(l.a)(r,"fares/fare/start".concat(e.depart,"/end").concat(e.arrival))).then((function(e){console.log(e.val())})).catch((function(e){console.log(e),alert("查無資訊")}));case 3:case"end":return t.stop()}}),t)})))()},oneTrainSearch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={apiKey:"AIzaSyDjAHb07_Mk-pJExz3tg04BgpB8QLHvFgY",authDomain:"rail-nuxt.firebaseapp.com",databaseURL:"https://rail-nuxt-default-rtdb.firebaseio.com",projectId:"rail-nuxt",storageBucket:"rail-nuxt.appspot.com",messagingSenderId:"85380246039",appId:"1:85380246039:web:82e4bcb2bdc6ed35f5ca52",measurementId:"G-4HSRY9S9HE"},r=Object(l.d)(Object(l.c)(Object(d.a)(n))),Object(l.b)(Object(l.a)(r,"oneTrains/info/No".concat(e.searchTrainNo))).then((function(e){console.log(e.val())})).catch((function(e){console.log(e),alert("查無資訊")}));case 3:case"end":return t.stop()}}),t)})))()}}},h=n(89),v=n(223),T=n.n(v),D=n(344),I=n(346),O=n(380),A=n(385),x=n(345),N=n(382),component=Object(h.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-container",[n("h1",[e._v(e._s(e.$t("greeting")))]),e._v(" "),n("h1",[e._v("Fare well.")]),e._v(" "),n("h3",[e._v("更新所選日期列車資訊")]),e._v(" "),n("v-text-field",{attrs:{type:"date"},model:{value:e.setDate,callback:function(t){e.setDate=t},expression:"setDate"}}),e._v(" "),n("v-btn",{attrs:{color:"deep-purple",dark:""},on:{click:e.getTrainInfo}},[e._v("\n          update\n        ")])],1),e._v(" "),n("v-container",[n("v-row",{staticClass:"my-3",attrs:{justify:"space-around",align:"center"}},[n("h3",[e._v("與官方同步")]),e._v(" "),n("v-btn",{attrs:{color:"light-green",dark:""},on:{click:e.findFare}},[e._v("update fare")]),e._v(" "),n("v-btn",{attrs:{color:"lime",dark:""},on:{click:e.getOneTrain}},[e._v("Update TrainList")])],1)],1),e._v(" "),n("v-container",[n("v-text-field",{attrs:{type:"date"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),e._v(" "),n("v-text-field",{attrs:{label:"depart"},model:{value:e.depart,callback:function(t){e.depart=t},expression:"depart"}}),e._v(" "),n("v-text-field",{attrs:{label:"arrival"},model:{value:e.arrival,callback:function(t){e.arrival=t},expression:"arrival"}}),e._v(" "),n("v-btn",{on:{click:e.getAllMes}},[e._v("\n           search\n        ")])],1),e._v(" "),n("v-container",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"TrainNo"},model:{value:e.searchTrainNo,callback:function(t){e.searchTrainNo=t},expression:"searchTrainNo"}})],1),e._v(" "),n("v-col",[n("v-btn",{on:{click:e.oneTrainSearch}},[e._v("\n                    SEARCH\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;T()(component,{VApp:D.a,VBtn:I.a,VCol:O.a,VContainer:A.a,VRow:x.a,VTextField:N.a})}}]);